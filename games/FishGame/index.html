<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Generated by GameMaker:Studio http://www.yoyogames.com/gamemaker/studio -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="icon" href="icon.png">
    <link rel="shortcut icon" href="icon.png">
    <meta charset="utf-8" />

    <!-- Set the title bar of the page -->
    <title>Generic Fishing Game</title>

    <!-- Set the background colour of the document -->
    <style>
      body {
        background: #000000;
        color: #cccccc;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
      }
      #game-container {
        position: relative;
      }
      canvas {
        image-rendering: optimizeSpeed;
        -webkit-interpolation-mode: nearest-neighbor;
        -ms-touch-action: none;
        margin: 0;
        padding: 0;
        border: 0;
      }
      /* Styles for the D-pad and Space button */
      .dpad, .space-button {
        position: absolute;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      .dpad {
        bottom: 20px;
        left: 20px;
      }
      .space-button {
        bottom: 20px;
        right: 20px;
      }

      .space-button button {
        width: 100px!important; /* Adjust the value as needed */
  height: 80px !important;
      }
      .dpad button, .space-button button {
        width: 60px;
        height: 60px;
        font-size: 18px;
        color: #fff;
        background-color: #404040;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }
      .dpad button:active, .space-button button:active {
        background-color: #606060;
      }
      .dpad-controls {
        display: flex;
        flex-direction: row;
        gap: 10px;
      }
    </style>
  </head>

  <body>
    <div id="game-container">
      <div class="gm4html5_div_class" id="gm4html5_div_id">
        <!-- Create the canvas element the game draws to -->
        <canvas id="canvas" width="960" height="540">
          <p>Your browser doesn't support HTML5 canvas.</p>
        </canvas>
      </div>

      <!-- D-pad for movement -->
      <div class="dpad">
        <button id="upButton">▲</button>
        <div class="dpad-controls">
          <button id="leftButton">◀</button>
          <button id="downButton">▼</button>
          <button id="rightButton">▶</button>
        </div>
      </div>

      <!-- Space bar button for mobile users -->
      <div class="space-button">
        <button id="spaceButton">Space Button</button>
      </div>
    </div>

    <!-- Run the game code -->
    <script type="text/javascript" src="html5game/GenericFishing.js"></script>
    <script>
      window.onload = GameMaker_Init;

      // Button references
      const spaceButton = document.getElementById("spaceButton");
      const leftButton = document.getElementById("leftButton");
      const rightButton = document.getElementById("rightButton");
      const upButton = document.getElementById("upButton");
      const downButton = document.getElementById("downButton");

      // Emulate keyboard events on button press and release
      function simulateKeyPress(keyCode, isKeyDown) {
        const eventType = isKeyDown ? "keydown" : "keyup";
        const event = new KeyboardEvent(eventType, { keyCode: keyCode, which: keyCode, bubbles: true });
        window.dispatchEvent(event);
      }

      // Space button press and release
      spaceButton.addEventListener("mousedown", () => simulateKeyPress(32, true));
      spaceButton.addEventListener("mouseup", () => simulateKeyPress(32, false));
      spaceButton.addEventListener("touchstart", (event) => {
        event.preventDefault();
        simulateKeyPress(32, true);
      });
      spaceButton.addEventListener("touchend", () => simulateKeyPress(32, false));

      // D-pad button controls
      leftButton.addEventListener("mousedown", () => simulateKeyPress(37, true));
      leftButton.addEventListener("mouseup", () => simulateKeyPress(37, false));
      rightButton.addEventListener("mousedown", () => simulateKeyPress(39, true));
      rightButton.addEventListener("mouseup", () => simulateKeyPress(39, false));
      upButton.addEventListener("mousedown", () => simulateKeyPress(38, true));
      upButton.addEventListener("mouseup", () => simulateKeyPress(38, false));
      downButton.addEventListener("mousedown", () => simulateKeyPress(40, true));
      downButton.addEventListener("mouseup", () => simulateKeyPress(40, false));

      // For mobile touch support
      leftButton.addEventListener("touchstart", (event) => { event.preventDefault(); simulateKeyPress(37, true); });
      leftButton.addEventListener("touchend", () => simulateKeyPress(37, false));
      rightButton.addEventListener("touchstart", (event) => { event.preventDefault(); simulateKeyPress(39, true); });
      rightButton.addEventListener("touchend", () => simulateKeyPress(39, false));
      upButton.addEventListener("touchstart", (event) => { event.preventDefault(); simulateKeyPress(38, true); });
      upButton.addEventListener("touchend", () => simulateKeyPress(38, false));
      downButton.addEventListener("touchstart", (event) => { event.preventDefault(); simulateKeyPress(40, true); });
      downButton.addEventListener("touchend", () => simulateKeyPress(40, false));
    </script>
    <script>
      window.onclick = function () {
        window.focus();
      };
    </script>
    <script type="text/javascript" src="/js/main.js"></script>
  </body>
</html>
